# 名称：test-generator
# 说明：在实现文件修改时自动更新或生成对应的测试文件

Trigger: File Save
Target: "src/**/*.{ts,tsx}"
Exclude: "**/*.test.*"
Instructions: |
  当保存实现文件时，自动执行以下操作：

  1. 分析变更内容  
     - 新增的函数  
     - 修改后的函数签名  
     - 新增的类  

  2. 检查对应的测试文件  
     - 如果不存在，则自动创建  
     - 命名格式为：文件名.test.ts(x)  

  3. 生成或更新测试用例  
     - 正常流程（happy path）测试  
     - 异常处理测试  
     - 边界条件（edge case）测试  
     - 如需 mock，会自动合理配置  

  4. 检查测试覆盖率  
     - 确保新代码已被测试覆盖  
     - 避免整体覆盖率下降  
     - 目标保持在 80% 以上  

  5. 执行测试  
     - 验证自动生成的测试是否通过  
     - 如有失败，提供修复建议